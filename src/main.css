/* ═══════════════════════════════════════════════════════════════
   🎯 OPTIMIZED BASE VARIABLES - No lag, smooth performance
   ═══════════════════════════════════════════════════════════════ */
:root {
  /* Performance optimizations */
  --transition-smooth: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-fast: 0.1s ease;
  --will-change: transform, opacity, background-color;
  
  /* Layout & Spacing */
  --border-radius: 8px;
  --border-radius-large: 16px;
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;

  /* Typography */
  --font-family-primary: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-bold: 600;

  /* Base Shadows - Optimized for performance */
  --shadow-subtle: 0 1px 3px rgba(0, 0, 0, 0.1);
  --shadow-card: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-large: 0 10px 25px rgba(0, 0, 0, 0.15);
}

/* ═══════════════════════════════════════════════════════════════
   🌙 DARK THEME (Default) - Enhanced
   ═══════════════════════════════════════════════════════════════ */
:root,
.dark-theme {
  /* Deep space backgrounds */
  --color-bg-body: transparent; /* Let PNG show through */
  --color-bg-main: rgba(22, 22, 30, 0.85); /* Semi-transparent overlays */
  --color-bg-card: rgba(30, 30, 45, 0.9);

  /* Crisp text hierarchy */
  --color-text-primary: #ffffff;
  --color-text-secondary: #b8b8d1;
  --color-text-muted: #8888aa;
  --color-text-inverse: #0a0a0f;

  /* Tech blue accents */
  --color-accent-primary: #5865f2;
  --color-accent-secondary: #4752c4;
  --color-accent-hover: #6c7ae0;
  --color-accent-glow: rgba(88, 101, 242, 0.3);

  /* Status colors */
  --color-success: #22c55e;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
  --color-info: #3b82f6;

  /* Borders with subtle glow */
  --color-border: rgba(136, 136, 170, 0.2);
  --color-border-focus: rgba(88, 101, 242, 0.5);
  --color-border-hover: rgba(136, 136, 170, 0.3);

  /* Add theme-specific variables for notifications */
  --theme-scan-animation: mission-scan;
  --color-mission-primary: #87ceeb;
  --color-mission-glow: rgba(135, 206, 235, 0.4);
}

/* ═══════════════════════════════════════════════════════════════
   ☀️ LIGHT THEME - Warm & Inviting
   ═══════════════════════════════════════════════════════════════ */
.light-theme {
  /* Warm cream backgrounds */
  --color-bg-body: #fefdf8;
  --color-bg-main: #ffffff;
  --color-bg-card: #faf9f4;
  --color-bg-hover: #f5f4ef;
  --color-bg-input: #f8f7f2;
  --color-bg-input-focus: #ffffff;
  --color-bg-sidebar: linear-gradient(145deg, #faf9f4 0%, #f5f4ef 50%, #faf9f4 100%);

  /* Rich readable text */
  --color-text-primary: #2d2d2d;
  --color-text-secondary: #4a4a4a;
  --color-text-muted: #757575;
  --color-text-inverse: #ffffff;

  /* Warm golden accents */
  --color-accent-primary: #c4976c;
  --color-accent-secondary: #b8885a;
  --color-accent-hover: #d4a67c;
  --color-accent-glow: rgba(196, 151, 108, 0.3);

  /* Natural status colors */
  --color-success: #16a34a;
  --color-warning: #d97706;
  --color-error: #dc2626;
  --color-info: #2563eb;

  /* Soft borders */
  --color-border: rgba(45, 45, 45, 0.15);
  --color-border-focus: rgba(196, 151, 108, 0.5);
  --color-border-hover: rgba(45, 45, 45, 0.25);
}

/* ═══════════════════════════════════════════════════════════════
   🌸 YANDERE THEME - Obsessive Romance (Enhanced)
   ═══════════════════════════════════════════════════════════════ */
.yandere-theme {
  /* Deep romantic darkness */
  --color-bg-body: #0e0a0d;
  --color-bg-main: #1a0f17;
  --color-bg-card: #2d1a26;
  --color-bg-hover: #3d2436;
  --color-bg-input: #2d1a26;
  --color-bg-input-focus: #3d2436;
  --color-bg-sidebar: linear-gradient(145deg, #2d1a26 0%, #1a0f17 50%, #2d1a26 100%);

  /* Pink-tinted romance */
  --color-text-primary: #ffe6f2;
  --color-text-secondary: #e6b8d6;
  --color-text-muted: #cc99bb;
  --color-text-inverse: #0e0a0d;

  /* Passionate pink accents */
  --color-accent-primary: #ff6bb3;
  --color-accent-secondary: #e91e63;
  --color-accent-hover: #ff8cc8;
  --color-accent-glow: rgba(255, 107, 179, 0.4);

  /* Love-struck status colors */
  --color-success: #ff6bb3;
  --color-warning: #ffab40;
  --color-error: #ff1744;
  --color-info: #e91e63;

  /* Glowing pink borders */
  --color-border: rgba(255, 107, 179, 0.25);
  --color-border-focus: rgba(255, 107, 179, 0.6);
  --color-border-hover: rgba(255, 107, 179, 0.35);

  /* Yandere atmosphere */
  --yandere-heart: #ff6bb3;
  --yandere-blush: #ffb3d9;
  --yandere-obsession: #8b0051;
  --yandere-knife: rgba(192, 192, 192, 0.4);
}

/* ═══════════════════════════════════════════════════════════════
   🧡 TSUNDERE THEME - Fiery Emotions (Enhanced)
   ═══════════════════════════════════════════════════════════════ */
.tsundere-theme {
  /* Fiery passionate backgrounds */
  --color-bg-body: #1a0e0a;
  --color-bg-main: #2d1a15;
  --color-bg-card: #3d2620;
  --color-bg-hover: #4d3228;
  --color-bg-input: #2d1a15;
  --color-bg-input-focus: #3d2620;
  --color-bg-sidebar: linear-gradient(145deg, #3d2620 0%, #2d1a15 50%, #3d2620 100%);

  /* Warm conflicted text */
  --color-text-primary: #ffe6d9;
  --color-text-secondary: #ffccb3;
  --color-text-muted: #e6a885;
  --color-text-inverse: #1a0e0a;

  /* Fierce orange-pink accents */
  --color-accent-primary: #ff6b42;
  --color-accent-secondary: #ff4500;
  --color-accent-hover: #ff8566;
  --color-accent-glow: rgba(255, 107, 66, 0.4);

  /* Hot-tempered status colors */
  --color-success: #22c55e;
  --color-warning: #ff8f00;
  --color-error: #ff1744;
  --color-info: #ff6b42;

  /* Heated borders */
  --color-border: rgba(255, 107, 66, 0.3);
  --color-border-focus: rgba(255, 107, 66, 0.7);
  --color-border-hover: rgba(255, 107, 66, 0.4);

  /* Tsundere energy */
  --tsundere-fire: #ff4500;
  --tsundere-blush: #ffb399;
  --tsundere-denial: #cc5500;
  --tsundere-spark: rgba(255, 140, 0, 0.6);
}

/* ═══════════════════════════════════════════════════════════════
   ❄️ KUUDERE THEME - Ice Queen (Enhanced)
   ═══════════════════════════════════════════════════════════════ */
.kuudere-theme {
  /* Glacial environments */
  --color-bg-body: #0a0f1a;
  --color-bg-main: #15202d;
  --color-bg-card: #1e2938;
  --color-bg-hover: #253544;
  --color-bg-input: #15202d;
  --color-bg-input-focus: #1e2938;
  --color-bg-sidebar: linear-gradient(145deg, #1e2938 0%, #15202d 50%, #1e2938 100%);

  /* Crystal clear text */
  --color-text-primary: #e6f3ff;
  --color-text-secondary: #b3d9ff;
  --color-text-muted: #80bfff;
  --color-text-inverse: #0a0f1a;

  /* Ice crystal accents */
  --color-accent-primary: #4da6ff;
  --color-accent-secondary: #0080ff;
  --color-accent-hover: #66b3ff;
  --color-accent-glow: rgba(77, 166, 255, 0.3);

  /* Cool status colors */
  --color-success: #22c55e;
  --color-warning: #60a5fa;
  --color-error: #3b82f6;
  --color-info: #4da6ff;

  /* Frost borders */
  --color-border: rgba(77, 166, 255, 0.25);
  --color-border-focus: rgba(77, 166, 255, 0.6);
  --color-border-hover: rgba(77, 166, 255, 0.35);

  /* Kuudere essence */
  --kuudere-ice: #4da6ff;
  --kuudere-frost: #e6f3ff;
  --kuudere-crystal: #b3d9ff;
  --kuudere-cold: rgba(128, 191, 255, 0.4);
}

/* ═══════════════════════════════════════════════════════════════
   💜 DANDERE THEME - Shy Beauty (Enhanced)
   ═══════════════════════════════════════════════════════════════ */
.dandere-theme {
  /* Gentle twilight backgrounds */
  --color-bg-body: #0f0a1a;
  --color-bg-main: #1a152d;
  --color-bg-card: #2a2438;
  --color-bg-hover: #342d44;
  --color-bg-input: #1a152d;
  --color-bg-input-focus: #2a2438;
  --color-bg-sidebar: linear-gradient(145deg, #2a2438 0%, #1a152d 50%, #2a2438 100%);

  /* Soft lavender text */
  --color-text-primary: #f0ebff;
  --color-text-secondary: #d1c4ff;
  --color-text-muted: #b19eff;
  --color-text-inverse: #0f0a1a;

  /* Gentle purple accents */
  --color-accent-primary: #9d7bff;
  --color-accent-secondary: #7c3aed;
  --color-accent-hover: #b794ff;
  --color-accent-glow: rgba(157, 123, 255, 0.3);

  /* Soft status colors */
  --color-success: #22c55e;
  --color-warning: #c084fc;
  --color-error: #f472b6;
  --color-info: #9d7bff;

  /* Whisper borders */
  --color-border: rgba(157, 123, 255, 0.2);
  --color-border-focus: rgba(157, 123, 255, 0.5);
  --color-border-hover: rgba(157, 123, 255, 0.3);

  /* Dandere spirit */
  --dandere-purple: #9d7bff;
  --dandere-lavender: #d1c4ff;
  --dandere-whisper: #f0ebff;
  --dandere-shy: rgba(177, 158, 255, 0.3);
}

/* ═══════════════════════════════════════════════════════════════
   🎯 ENHANCED COMPONENT STYLING - All Themes
   ═══════════════════════════════════════════════════════════════ */

/* Cards with theme-appropriate glows */
.dashboard-card,
.settings-card,
.diary-card,
.calendar-card,
.profile-card {
  background: var(--color-bg-card);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-large);
  box-shadow: var(--shadow-card), 0 0 20px var(--color-accent-glow);
  transition: var(--transition-smooth);
  will-change: var(--will-change);
}

.dashboard-card:hover,
.settings-card:hover,
.diary-card:hover,
.calendar-card:hover,
.profile-card:hover {
  border-color: var(--color-border-hover);
  box-shadow: var(--shadow-large), 0 0 25px var(--color-accent-glow);
  transform: translateY(-2px);
}

/* Enhanced buttons */
.btn-primary,
.save-settings-btn,
.diary-save-btn,
.theme-toggle-btn {
  background: linear-gradient(135deg, var(--color-accent-primary), var(--color-accent-secondary));
  color: var(--color-text-inverse);
  border: none;
  border-radius: var(--border-radius);
  padding: 0.75rem 1.5rem;
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: var(--transition-smooth);
  box-shadow: 0 2px 8px var(--color-accent-glow);
  will-change: var(--will-change);
}

.btn-primary:hover,
.save-settings-btn:hover,
.diary-save-btn:hover,
.theme-toggle-btn:hover {
  background: linear-gradient(135deg, var(--color-accent-hover), var(--color-accent-primary));
  box-shadow: 0 4px 12px var(--color-accent-glow);
  transform: translateY(-1px);
}

/* Enhanced inputs */
input,
textarea,
select {
  background: var(--color-bg-input);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  padding: 0.75rem;
  font-family: var(--font-family-primary);
  transition: var(--transition-smooth);
  will-change: var(--will-change);
}

input:focus,
textarea:focus,
select:focus {
  background: var(--color-bg-input-focus);
  border-color: var(--color-border-focus);
  outline: none;
  box-shadow: 0 0 10px var(--color-accent-glow);
}

/* Enhanced sidebar */
.sidebar {
  background: var(--color-bg-sidebar);
  backdrop-filter: blur(10px);
  box-shadow: 5px 0 25px rgba(0, 0, 0, 0.3), 0 0 20px var(--color-accent-glow);
}

/* Enhanced sidebar toggle */
.sidebar-toggle {
  background: linear-gradient(135deg, var(--color-accent-primary), var(--color-accent-secondary));
  box-shadow: 0 0 15px var(--color-accent-glow);
  border-radius: 0 25px 25px 0;
}

.sidebar-toggle:hover {
  box-shadow: 0 0 20px var(--color-accent-glow);
}

/* Enhanced text hierarchy */
h1, h2, h3, h4, h5, h6 {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-bold);
}

p, span, label {
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-normal);
}

.text-muted {
  color: var(--color-text-muted);
}

/* ═══════════════════════════════════════════════════════════════
   🚀 PERFORMANCE OPTIMIZATIONS
   ═══════════════════════════════════════════════════════════════ */

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ═══════════════════════════════════════════════════════════════
   📱 RESPONSIVE LAYOUT
   ═══════════════════════════════════════════════════════════════ */
/* ✅ KEEP: Always 100% of available space */
.main-content-wrapper {
  width: 100%;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  /* ✅ KEY: Remove any transforms that push content */
  will-change: width, max-width;
  transform: translateZ(0);
}

.main-content-wrapper.sidebar-visible {
  width: calc(100% - 280px);
  max-width: calc(100vw - 280px);
}

/* ✅ ENSURE: Content adjusts smoothly */
.main-content-wrapper > * {
  transition: none;
  max-width: 100%;
  overflow-x: hidden; /* ✅ PREVENT: Horizontal overflow */
}

/* ═══════════════════════════════════════════════════════════════
   🎨 GLOBAL BASE STYLES
   ═══════════════════════════════════════════════════════════════ */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: var(--font-family-primary);
  background: #0a0a0f; /* Fallback color */
  background-image: url('./assets/backgrounds/dark-theme.png');
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  background-repeat: no-repeat;
  color: var(--color-text-primary);
  line-height: 1.6;
  transition: background-image 0.5s ease-in-out;
  overflow-x: hidden;
  font-weight: var(--font-weight-normal);
}

/* Theme-specific backgrounds */
body.light-theme {
  background-image: url('./assets/backgrounds/light-theme.png');
  background-color: #fefdf8; /* Fallback */
}

body.yandere-theme {
  background-image: url('./assets/backgrounds/yandere-theme.png');
  background-color: #0e0a0d; /* Fallback */
}

body.kuudere-theme {
  background-image: url('./assets/backgrounds/kuudere-theme.png');
  background-color: #0a0d12; /* Fallback */
}

body.tsundere-theme {
  background-image: url('./assets/backgrounds/tsundere-theme.png');
  background-color: #1a0f0a; /* Fallback */
}

body.dandere-theme {
  background-image: url('./assets/backgrounds/dandere-theme.png');
  background-color: #0f0a12; /* Fallback */
}

/* Base Button Styles - PRESERVED as requested */
button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: var(--color-bg-card);
  cursor: pointer;
  transition: all 0.25s ease;
  color: var(--color-text-primary);
}

button:hover {
  border-color: var(--color-accent-primary);
  background-color: var(--color-bg-hover);
}

button:focus,
button:focus-visible {
  outline: 2px solid var(--color-accent-primary);
}

/* Add theme-specific variables for notifications */
:root,
.dark-theme {
  --theme-scan-animation: mission-scan;
  --color-mission-primary: #87ceeb;
  --color-mission-glow: rgba(135, 206, 235, 0.4);
}

.yandere-theme {
  --theme-scan-animation: yandere-heart-scan;
  --color-mission-primary: var(--yandere-heart);
  --color-mission-glow: var(--yandere-blush);
}

.tsundere-theme {
  --theme-scan-animation: tsundere-fire-sweep;
  --color-mission-primary: #ff6b35;
  --color-mission-glow: rgba(255, 107, 53, 0.4);
}

.kuudere-theme {
  --theme-scan-animation: kuudere-ice-formation;
  --color-mission-primary: #7dd3fc;
  --color-mission-glow: rgba(125, 211, 252, 0.4);
}
